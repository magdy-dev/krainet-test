2025-07-25 12:44:02.607 [main] INFO  c.k.a.AuthServiceApplication - Starting AuthServiceApplication using Java 22.0.1 with PID 24844 (E:\krainet-test\auth-service\target\classes started by marko in E:\krainet-test)
2025-07-25 12:44:02.609 [main] DEBUG c.k.a.AuthServiceApplication - Running with Spring Boot v3.5.4, Spring v6.2.9
2025-07-25 12:44:02.625 [main] INFO  c.k.a.AuthServiceApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-25 12:44:06.519 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-25 12:44:06.652 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 113 ms. Found 1 JPA repository interface.
2025-07-25 12:44:08.663 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-25 12:44:08.695 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-25 12:44:08.696 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.43]
2025-07-25 12:44:08.848 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-25 12:44:08.850 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 6108 ms
2025-07-25 12:44:09.548 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-25 12:44:10.036 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6c1b82cd
2025-07-25 12:44:10.038 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-25 12:44:10.377 [main] INFO  liquibase.database - Set default schema name to public
2025-07-25 12:44:10.719 [main] INFO  liquibase.command - Logging exception.
2025-07-25 12:44:10.722 [main] INFO  liquibase.ui - ERROR: Exception Details
2025-07-25 12:44:10.724 [main] INFO  liquibase.ui - ERROR: Exception Primary Class:  ChangeLogParseException
2025-07-25 12:44:10.725 [main] INFO  liquibase.ui - ERROR: Exception Primary Reason:  classpath:/db/changelog/db.changelog-master.yaml does not exist
2025-07-25 12:44:10.727 [main] INFO  liquibase.ui - ERROR: Exception Primary Source:  4.31.1
2025-07-25 12:44:10.729 [main] INFO  liquibase.command - Command execution complete
2025-07-25 12:44:12.265 [main] ERROR o.s.b.w.e.tomcat.TomcatStarter - Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name 'jwtAuthenticationFilter' defined in file [E:\krainet-test\auth-service\target\classes\com\krainet\authservice\security\JwtAuthenticationFilter.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'customUserDetailsService' defined in file [E:\krainet-test\auth-service\target\classes\com\krainet\authservice\security\CustomUserDetailsService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepository' defined in com.krainet.authservice.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot resolve reference to bean 'jpaSharedEM_entityManagerFactory' while setting bean property 'entityManager'
2025-07-25 12:44:12.331 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-25 12:44:12.336 [main] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [ROOT] appears to have started a thread named [HikariPool-1:housekeeper] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/jdk.internal.misc.Unsafe.park(Native Method)
 java.base/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:269)
 java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1758)
 java.base/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1182)
 java.base/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:899)
 java.base/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1070)
 java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
 java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
 java.base/java.lang.Thread.run(Thread.java:1570)
2025-07-25 12:44:12.336 [main] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [ROOT] appears to have started a thread named [HikariPool-1:connection-adder] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/jdk.internal.misc.Unsafe.park(Native Method)
 java.base/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:269)
 java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1758)
 java.base/java.util.concurrent.LinkedBlockingQueue.poll(LinkedBlockingQueue.java:460)
 java.base/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1069)
 java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
 java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
 java.base/java.lang.Thread.run(Thread.java:1570)
2025-07-25 12:44:12.337 [main] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [ROOT] appears to have started a thread named [Thread-1] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/sun.nio.ch.SocketDispatcher.read0(Native Method)
 java.base/sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:46)
 java.base/sun.nio.ch.NioSocketImpl.tryRead(NioSocketImpl.java:256)
 java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:307)
 java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:346)
 java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:796)
 java.base/java.net.Socket$SocketInputStream.implRead(Socket.java:1108)
 java.base/java.net.Socket$SocketInputStream.read(Socket.java:1095)
 java.base/sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:489)
 java.base/sun.security.ssl.SSLSocketInputRecord.readHeader(SSLSocketInputRecord.java:483)
 java.base/sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:160)
 java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:111)
 java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1507)
 java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1422)
 java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:455)
 java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:426)
 java.base/sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:586)
 java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:187)
 java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1691)
 java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1615)
 java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:223)
 java.base/java.net.URL.openStream(URL.java:1325)
 liquibase.analytics.configuration.LiquibaseRemoteAnalyticsConfiguration.lambda$static$0(LiquibaseRemoteAnalyticsConfiguration.java:46)
 java.base/java.lang.Thread.run(Thread.java:1570)
2025-07-25 12:44:12.346 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server
2025-07-25 12:44:12.347 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-25 12:44:12.428 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-25 12:44:12.490 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-07-25 12:44:12.632 [main] ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2025-07-25 12:47:58.948 [main] INFO  c.k.a.AuthServiceApplication - Starting AuthServiceApplication using Java 22.0.1 with PID 20744 (E:\krainet-test\auth-service\target\classes started by marko in E:\krainet-test)
2025-07-25 12:47:58.951 [main] DEBUG c.k.a.AuthServiceApplication - Running with Spring Boot v3.5.4, Spring v6.2.9
2025-07-25 12:47:58.953 [main] INFO  c.k.a.AuthServiceApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-25 12:48:01.889 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-25 12:48:02.009 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 102 ms. Found 1 JPA repository interface.
2025-07-25 12:48:03.766 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-25 12:48:03.796 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-25 12:48:03.797 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.43]
2025-07-25 12:48:03.942 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-25 12:48:03.945 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4897 ms
2025-07-25 12:48:04.615 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-25 12:48:05.021 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3ec7eb5
2025-07-25 12:48:05.024 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-25 12:48:05.365 [main] INFO  liquibase.database - Set default schema name to public
2025-07-25 12:48:06.374 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
2025-07-25 12:48:06.477 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-07-25 12:48:06.565 [main] INFO  liquibase.snapshot - Creating snapshot
2025-07-25 12:48:06.769 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
2025-07-25 12:48:06.771 [main] INFO  liquibase.command - Using deploymentId: 3436884564
2025-07-25 12:48:06.775 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-07-25 12:48:06.831 [main] INFO  liquibase.ui - Running Changeset: db/changelog/db.changelog-1.0.yaml::1::system
2025-07-25 12:48:06.861 [main] INFO  liquibase.changelog - Table users created
2025-07-25 12:48:06.863 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-1.0.yaml::1::system ran successfully in 30ms
2025-07-25 12:48:06.875 [main] INFO  liquibase.ui - Running Changeset: db/changelog/db.changelog-1.0.yaml::2::system
2025-07-25 12:48:06.881 [main] INFO  liquibase.changelog - Index idx_users_username created
2025-07-25 12:48:06.884 [main] INFO  liquibase.changelog - Index idx_users_email created
2025-07-25 12:48:06.885 [main] INFO  liquibase.changelog - ChangeSet db/changelog/db.changelog-1.0.yaml::2::system ran successfully in 9ms
2025-07-25 12:48:06.899 [main] INFO  liquibase.util - UPDATE SUMMARY
2025-07-25 12:48:06.900 [main] INFO  liquibase.util - Run:                          2
2025-07-25 12:48:06.900 [main] INFO  liquibase.util - Previously run:               0
2025-07-25 12:48:06.900 [main] INFO  liquibase.util - Filtered out:                 0
2025-07-25 12:48:06.900 [main] INFO  liquibase.util - -------------------------------
2025-07-25 12:48:06.900 [main] INFO  liquibase.util - Total change sets:            2
2025-07-25 12:48:06.902 [main] INFO  liquibase.util - Update summary generated
2025-07-25 12:48:06.907 [main] INFO  liquibase.command - Update command completed successfully.
2025-07-25 12:48:06.909 [main] INFO  liquibase.ui - Liquibase: Update has been successful. Rows affected: 2
2025-07-25 12:48:06.914 [main] INFO  liquibase.lockservice - Successfully released change log lock
2025-07-25 12:48:06.917 [main] INFO  liquibase.command - Command execution complete
2025-07-25 12:48:08.678 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-25 12:48:08.798 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.22.Final
2025-07-25 12:48:08.875 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-25 12:48:09.670 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-25 12:48:09.783 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-25 12:48:09.811 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.4
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-25 12:48:11.211 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-25 12:48:11.253 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-25 12:48:12.080 [main] DEBUG c.k.a.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-07-25 12:48:12.247 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-07-25 12:48:12.247 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-07-25 12:48:12.781 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-25 12:48:13.632 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-07-25 12:48:15.084 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-25 12:48:15.115 [main] INFO  c.k.a.AuthServiceApplication - Started AuthServiceApplication in 17.596 seconds (process running for 18.491)
2025-07-25 12:51:15.250 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-25 12:51:15.269 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-25 12:51:15.281 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-25 12:51:15.285 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-25 12:51:15.301 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-25 16:24:17.666 [main] INFO  c.k.a.AuthServiceApplication - Starting AuthServiceApplication using Java 22.0.1 with PID 21680 (E:\krainet-test\auth-service\target\classes started by marko in E:\krainet-test)
2025-07-25 16:24:17.670 [main] DEBUG c.k.a.AuthServiceApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-07-25 16:24:17.674 [main] INFO  c.k.a.AuthServiceApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-25 16:24:22.357 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-25 16:24:22.491 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 116 ms. Found 1 JPA repository interface.
2025-07-25 16:24:25.258 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-25 16:24:25.291 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-25 16:24:25.292 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-07-25 16:24:25.510 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-25 16:24:25.514 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 7717 ms
2025-07-25 16:24:26.376 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-25 16:24:26.947 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5c997de8
2025-07-25 16:24:26.952 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-25 16:24:27.492 [main] INFO  liquibase.database - Set default schema name to public
2025-07-25 16:24:28.231 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-07-25 16:24:28.362 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
2025-07-25 16:24:28.366 [main] INFO  liquibase.command - Using deploymentId: 3449868365
2025-07-25 16:24:28.370 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-07-25 16:24:28.578 [main] ERROR liquibase.changelog - ChangeSet db/changelog/db.changelog-1.0.sql::1::system encountered an exception.
2025-07-25 16:24:28.587 [main] INFO  liquibase.command - Update command encountered an exception.
2025-07-25 16:24:28.593 [main] INFO  liquibase.lockservice - Successfully released change log lock
2025-07-25 16:24:28.594 [main] INFO  liquibase.command - Command execution complete
2025-07-25 16:24:28.597 [main] ERROR o.s.b.w.e.tomcat.TomcatStarter - Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name 'jwtAuthenticationFilter' defined in file [E:\krainet-test\auth-service\target\classes\com\krainet\authservice\security\JwtAuthenticationFilter.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'customUserDetailsService' defined in file [E:\krainet-test\auth-service\target\classes\com\krainet\authservice\security\CustomUserDetailsService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepository' defined in com.krainet.authservice.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot resolve reference to bean 'jpaSharedEM_entityManagerFactory' while setting bean property 'entityManager'
2025-07-25 16:24:28.680 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-07-25 16:24:28.687 [main] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [ROOT] appears to have started a thread named [HikariPool-1 housekeeper] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/jdk.internal.misc.Unsafe.park(Native Method)
 java.base/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:269)
 java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1758)
 java.base/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1182)
 java.base/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:899)
 java.base/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1070)
 java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
 java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
 java.base/java.lang.Thread.run(Thread.java:1570)
2025-07-25 16:24:28.688 [main] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [ROOT] appears to have started a thread named [HikariPool-1 connection adder] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/sun.nio.ch.Net.poll(Native Method)
 java.base/sun.nio.ch.NioSocketImpl.park(NioSocketImpl.java:191)
 java.base/sun.nio.ch.NioSocketImpl.timedRead(NioSocketImpl.java:280)
 java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:304)
 java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:346)
 java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:796)
 java.base/java.net.Socket$SocketInputStream.implRead(Socket.java:1108)
 java.base/java.net.Socket$SocketInputStream.read(Socket.java:1095)
 org.postgresql.core.VisibleBufferedInputStream.readMore(VisibleBufferedInputStream.java:161)
 org.postgresql.core.VisibleBufferedInputStream.ensureBytes(VisibleBufferedInputStream.java:128)
 org.postgresql.core.VisibleBufferedInputStream.ensureBytes(VisibleBufferedInputStream.java:113)
 org.postgresql.core.VisibleBufferedInputStream.read(VisibleBufferedInputStream.java:73)
 org.postgresql.core.PGStream.receiveChar(PGStream.java:465)
 org.postgresql.core.v3.ConnectionFactoryImpl.enableSSL(ConnectionFactoryImpl.java:589)
 org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:191)
 org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:258)
 org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
 org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:263)
 org.postgresql.Driver.makeConnection(Driver.java:443)
 org.postgresql.Driver.connect(Driver.java:297)
 com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
 com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
 com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
 com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
 com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:733)
 com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712)
 java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
 java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
 java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
 java.base/java.lang.Thread.run(Thread.java:1570)
2025-07-25 16:24:28.690 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server
2025-07-25 16:24:28.691 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-25 16:24:29.025 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-25 16:24:29.066 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-07-25 16:24:29.108 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.context.ApplicationContextException: Unable to start web server
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:165)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:618)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at com.krainet.authservice.AuthServiceApplication.main(AuthServiceApplication.java:10)
Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:145)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:105)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:499)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:218)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	... 8 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jwtAuthenticationFilter' defined in file [E:\krainet-test\auth-service\target\classes\com\krainet\authservice\security\JwtAuthenticationFilter.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'customUserDetailsService' defined in file [E:\krainet-test\auth-service\target\classes\com\krainet\authservice\security\CustomUserDetailsService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepository' defined in com.krainet.authservice.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot resolve reference to bean 'jpaSharedEM_entityManagerFactory' while setting bean property 'entityManager'
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:210)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:173)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:168)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:153)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.<init>(ServletContextInitializerBeans.java:86)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:266)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:240)
	at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:52)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4866)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:845)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:240)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:433)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:921)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:126)
	... 13 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'customUserDetailsService' defined in file [E:\krainet-test\auth-service\target\classes\com\krainet\authservice\security\CustomUserDetailsService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepository' defined in com.krainet.authservice.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot resolve reference to bean 'jpaSharedEM_entityManagerFactory' while setting bean property 'entityManager'
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 54 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepository' defined in com.krainet.authservice.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot resolve reference to bean 'jpaSharedEM_entityManagerFactory' while setting bean property 'entityManager'
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:377)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:135)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1685)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1434)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785)
	... 68 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jpaSharedEM_entityManagerFactory': Cannot resolve reference to bean 'entityManagerFactory' while setting constructor argument
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:377)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:135)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:685)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:365)
	... 82 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-1.0.sql::1::system:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 3 in SQL do $$
begin
    if not exists (select 1 from pg_tables where tablename = 'users') then
        create table users (
            id uuid not null,
            username varchar(50) not null,
            email varchar(255) not null,
            password varchar(255) not null,
            first_name varchar(50),
            last_name varchar(50),
            role varchar(20) not null,
            enabled boolean not null default true,
            account_non_expired boolean not null default true,
            account_non_locked boolean not null default true,
            credentials_non_expired boolean not null default true,
            created_at timestamp not null default current_timestamp,
            updated_at timestamp not null default current_timestamp,
            constraint pk_users primary key (id),
            constraint uk_users_username unique (username),
            constraint uk_users_email unique (email)
        );
    end if. Expected terminating $$ [Failed SQL: (0) do $$
begin
    if not exists (select 1 from pg_tables where tablename = 'users') then
        create table users (
            id uuid not null,
            username varchar(50) not null,
            email varchar(255) not null,
            password varchar(255) not null,
            first_name varchar(50),
            last_name varchar(50),
            role varchar(20) not null,
            enabled boolean not null default true,
            account_non_expired boolean not null default true,
            account_non_locked boolean not null default true,
            credentials_non_expired boolean not null default true,
            created_at timestamp not null default current_timestamp,
            updated_at timestamp not null default current_timestamp,
            constraint pk_users primary key (id),
            constraint uk_users_username unique (username),
            constraint uk_users_email unique (email)
        );
    end if]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:365)
	... 94 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-1.0.sql::1::system:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 3 in SQL do $$
begin
    if not exists (select 1 from pg_tables where tablename = 'users') then
        create table users (
            id uuid not null,
            username varchar(50) not null,
            email varchar(255) not null,
            password varchar(255) not null,
            first_name varchar(50),
            last_name varchar(50),
            role varchar(20) not null,
            enabled boolean not null default true,
            account_non_expired boolean not null default true,
            account_non_locked boolean not null default true,
            credentials_non_expired boolean not null default true,
            created_at timestamp not null default current_timestamp,
            updated_at timestamp not null default current_timestamp,
            constraint pk_users primary key (id),
            constraint uk_users_username unique (username),
            constraint uk_users_email unique (email)
        );
    end if. Expected terminating $$ [Failed SQL: (0) do $$
begin
    if not exists (select 1 from pg_tables where tablename = 'users') then
        create table users (
            id uuid not null,
            username varchar(50) not null,
            email varchar(255) not null,
            password varchar(255) not null,
            first_name varchar(50),
            last_name varchar(50),
            role varchar(20) not null,
            enabled boolean not null default true,
            account_non_expired boolean not null default true,
            account_non_locked boolean not null default true,
            credentials_non_expired boolean not null default true,
            created_at timestamp not null default current_timestamp,
            updated_at timestamp not null default current_timestamp,
            constraint pk_users primary key (id),
            constraint uk_users_username unique (username),
            constraint uk_users_email unique (email)
        );
    end if]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 103 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-1.0.sql::1::system:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 3 in SQL do $$
begin
    if not exists (select 1 from pg_tables where tablename = 'users') then
        create table users (
            id uuid not null,
            username varchar(50) not null,
            email varchar(255) not null,
            password varchar(255) not null,
            first_name varchar(50),
            last_name varchar(50),
            role varchar(20) not null,
            enabled boolean not null default true,
            account_non_expired boolean not null default true,
            account_non_locked boolean not null default true,
            credentials_non_expired boolean not null default true,
            created_at timestamp not null default current_timestamp,
            updated_at timestamp not null default current_timestamp,
            constraint pk_users primary key (id),
            constraint uk_users_username unique (username),
            constraint uk_users_email unique (email)
        );
    end if. Expected terminating $$ [Failed SQL: (0) do $$
begin
    if not exists (select 1 from pg_tables where tablename = 'users') then
        create table users (
            id uuid not null,
            username varchar(50) not null,
            email varchar(255) not null,
            password varchar(255) not null,
            first_name varchar(50),
            last_name varchar(50),
            role varchar(20) not null,
            enabled boolean not null default true,
            account_non_expired boolean not null default true,
            account_non_locked boolean not null default true,
            credentials_non_expired boolean not null default true,
            created_at timestamp not null default current_timestamp,
            updated_at timestamp not null default current_timestamp,
            constraint pk_users primary key (id),
            constraint uk_users_username unique (username),
            constraint uk_users_email unique (email)
        );
    end if]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 115 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/db.changelog-1.0.sql::1::system:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 3 in SQL do $$
begin
    if not exists (select 1 from pg_tables where tablename = 'users') then
        create table users (
            id uuid not null,
            username varchar(50) not null,
            email varchar(255) not null,
            password varchar(255) not null,
            first_name varchar(50),
            last_name varchar(50),
            role varchar(20) not null,
            enabled boolean not null default true,
            account_non_expired boolean not null default true,
            account_non_locked boolean not null default true,
            credentials_non_expired boolean not null default true,
            created_at timestamp not null default current_timestamp,
            updated_at timestamp not null default current_timestamp,
            constraint pk_users primary key (id),
            constraint uk_users_username unique (username),
            constraint uk_users_email unique (email)
        );
    end if. Expected terminating $$ [Failed SQL: (0) do $$
begin
    if not exists (select 1 from pg_tables where tablename = 'users') then
        create table users (
            id uuid not null,
            username varchar(50) not null,
            email varchar(255) not null,
            password varchar(255) not null,
            first_name varchar(50),
            last_name varchar(50),
            role varchar(20) not null,
            enabled boolean not null default true,
            account_non_expired boolean not null default true,
            account_non_locked boolean not null default true,
            credentials_non_expired boolean not null default true,
            created_at timestamp not null default current_timestamp,
            updated_at timestamp not null default current_timestamp,
            constraint pk_users primary key (id),
            constraint uk_users_username unique (username),
            constraint uk_users_email unique (email)
        );
    end if]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 129 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 3 in SQL do $$
begin
    if not exists (select 1 from pg_tables where tablename = 'users') then
        create table users (
            id uuid not null,
            username varchar(50) not null,
            email varchar(255) not null,
            password varchar(255) not null,
            first_name varchar(50),
            last_name varchar(50),
            role varchar(20) not null,
            enabled boolean not null default true,
            account_non_expired boolean not null default true,
            account_non_locked boolean not null default true,
            credentials_non_expired boolean not null default true,
            created_at timestamp not null default current_timestamp,
            updated_at timestamp not null default current_timestamp,
            constraint pk_users primary key (id),
            constraint uk_users_username unique (username),
            constraint uk_users_email unique (email)
        );
    end if. Expected terminating $$ [Failed SQL: (0) do $$
begin
    if not exists (select 1 from pg_tables where tablename = 'users') then
        create table users (
            id uuid not null,
            username varchar(50) not null,
            email varchar(255) not null,
            password varchar(255) not null,
            first_name varchar(50),
            last_name varchar(50),
            role varchar(20) not null,
            enabled boolean not null default true,
            account_non_expired boolean not null default true,
            account_non_locked boolean not null default true,
            credentials_non_expired boolean not null default true,
            created_at timestamp not null default current_timestamp,
            updated_at timestamp not null default current_timestamp,
            constraint pk_users primary key (id),
            constraint uk_users_username unique (username),
            constraint uk_users_email unique (email)
        );
    end if]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 145 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 3 in SQL do $$
begin
    if not exists (select 1 from pg_tables where tablename = 'users') then
        create table users (
            id uuid not null,
            username varchar(50) not null,
            email varchar(255) not null,
            password varchar(255) not null,
            first_name varchar(50),
            last_name varchar(50),
            role varchar(20) not null,
            enabled boolean not null default true,
            account_non_expired boolean not null default true,
            account_non_locked boolean not null default true,
            credentials_non_expired boolean not null default true,
            created_at timestamp not null default current_timestamp,
            updated_at timestamp not null default current_timestamp,
            constraint pk_users primary key (id),
            constraint uk_users_username unique (username),
            constraint uk_users_email unique (email)
        );
    end if. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1443)
	at org.postgresql.core.Parser.parseSql(Parser.java:1342)
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1294)
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43)
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:313)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 150 common frames omitted
